YUI.namespace("com.schoolspecialty.ebs.istore").fixedAlign=function(panel){YUI().use("node","panel",function(Y){if(panel.get("rendered")==false){Y.log("Can not set positioning before the panel is rendered");}var leftPos,topPos,panelWidth,panelHeight,panelNode;topPos=Y.DOM.winHeight()/2;leftPos=Y.DOM.winWidth()/2;panelWidth=panel.get("width")/2;panelHeight=panel.get("height")/2;if(panelWidth*2<leftPos*2||panelHeight*2<topPos*2){leftPos=leftPos-panelWidth;topPos=topPos-panelHeight;panelNode=panel.get("boundingBox");panelNode.setStyles({"position":"fixed","top":topPos,"left":leftPos});}});};YUI.namespace("com.schoolspecialty.ebs.istore").alwaysCenter=function(panel){YUI().use("node","panel","event",function(Y){var winHeight,winWidth,panelWidth,panelHeight;panelWidth=panel.get("width");panelHeight=panel.get("height");Y.on("scroll",function(e){winHeight=Y.DOM.winHeight();winWidth=Y.DOM.winWidth();if(panelHeight<winHeight&&panelWidth<winWidth){panel.align();}});});};YUI.namespace("com.schoolspecialty.ebs.istore").heroImage=function(containerId,options){if(containerId){var hId="#"+containerId,heroList=hId+" ol";}else{return;}if(YUI){YUI({gallery:"gallery-2013.09.18-18-49"}).use("gallery-carousel","gallery-carousel-anim","substitute","node","event","dom","event-hover",function(Y){if(!Y.one(hId)){Y.log("No DOM element associated with id: "+containerId);return;}if(!Y.one(heroList)){Y.log("No list elements within the "+containerId+" container. Hero image will not be initialized");return;}function CarouselAnimPluginCircle(){CarouselAnimPluginCircle.superclass.constructor.apply(this,arguments);}var JS=Y.Lang,AFTERSCROLL_EVENT="afterScroll",BEFORESCROLL_EVENT="beforeScroll";CarouselAnimPluginCircle.NAME="carouselAnimPluginCircle";CarouselAnimPluginCircle.NS="animCircle";CarouselAnimPluginCircle.ATTRS={animation:{validator:"_validateAnimation",value:{speed:0,effect:Y.Easing.easeOut}}};Y.CarouselAnimPluginCircle=Y.extend(CarouselAnimPluginCircle,Y.Plugin.Base,{initializer:function(config){this.beforeHostMethod("scrollTo",this.animateAndScrollTo);},animateAndScrollTo:function(index){var self=this,carousel=self.get("host"),anim,animation,cb,first,from,isVertical,to,numItems,numVisible,dummyNode={},addedNode,circleLeft=false,circleRight=false;if(carousel.get("rendered")){numItems=carousel.get("numItems");animation=self.get("animation");if(carousel&&animation.speed>0){cb=carousel.get("contentBox");numVisible=carousel.get("numVisible");addNode=function(itemIndex){var dNode={},tmpChild,itemLeft=0,firstIndex;dNode.node=cb.cloneNode();dNode.first=carousel.getFirstVisible();firstIndex=dNode.first;tmpChild=carousel.getElementForItem(firstIndex);dNode.itemWidth=carousel._getNodeSize(tmpChild,"width");dNode.itemHeight=carousel._getNodeSize(tmpChild,"height");tmpChild=tmpChild.cloneNode("deep");tmpChild.setStyle("left","0px");dNode.node.append(tmpChild);firstIndex++;itemLeft+=dNode.itemWidth;for(var i=1;i<numVisible;i++){if(carousel.getElementForItem(firstIndex)!=null){tmpChild=carousel.getElementForItem(firstIndex).cloneNode("deep");tmpChild.setStyle("left",itemLeft+"px");dNode.node.append(tmpChild);firstIndex++;}else{i=numVisible+1;}}dNode.pageWidth=dNode.itemWidth*numVisible;dNode.totalWidth=dNode.itemWidth*numItems;dNode.node.removeAttribute("id");return dNode;};if(index<0){circleLeft=true;dummyNode=addNode(index+1);cb.setStyle("left","-"+dummyNode.totalWidth+"px");var rm=numItems%numVisible;if(rm==0){index=numItems-numVisible;}else{index=numItems-rm;}}else{if(index>numItems-1){circleRight=true;dummyNode=addNode(index-1);cb.setStyle("left",dummyNode.pageWidth+"px");index=0;}}isVertical=carousel.get("isVertical");if(isVertical){from={top:carousel.get("top")};to={top:carousel._getOffsetForIndex(index)};}else{from={left:cb.get("offsetLeft")};to={left:carousel._getOffsetForIndex(index)};}first=carousel.getFirstVisible();self.fire(BEFORESCROLL_EVENT,{first:first,last:first+carousel.get("numVisible")});anim=new Y.Anim({node:cb,from:from,to:to,duration:animation.speed,easing:animation.effect});if(circleLeft==true||circleRight==true){cb.get("parentNode").append(dummyNode.node);dummyNode.node.setStyles({"top":"0px","left":"0px","width":dummyNode.itemWidth+"px","height":dummyNode.itemHeight+"px","position":"absolute","padding-left":"10px","background":"white"});if(circleLeft==true){toValue=dummyNode.pageWidth;}else{toValue=-Math.abs(dummyNode.pageWidth);}anim2=new Y.Anim({node:dummyNode.node,from:{left:0},to:{left:toValue},duration:animation.speed,easing:animation.effect});anim.on("end",function(e){self._afterAnimEnd(index);dummyNode.node.remove();});anim.run();anim2.run();}else{anim.on("end",Y.bind(self._afterAnimEnd,self,index));anim.run();}return new Y.Do.Prevent();}}return false;},_afterAnimEnd:function(pos){var self=this,carousel=self.get("host");carousel.set("selectedItem",pos);},_validateAnimation:function(config){var rv=false;if(JS.isObject(config)){if(JS.isNumber(config.speed)){rv=true;}if(!JS.isUndefined(config.effect)&&!JS.isFunction(config.effect)){rv=false;}}return rv;},_animObj:null});var heroDef={mainNode:Y.one(hId),width:Y.one(hId).get("offsetWidth"),height:Y.one(hId).get("offsetHeight"),type:"banner",customClass:"",visible:1,controlWidth:32,navId:"js-product-car-nav"};if(options){Y.mix(heroDef,options,[overwrite=true]);}heroDef.mainNode=Y.one(hId);if(heroDef.mainNode.all("ol li").size()<=heroDef.visible){heroDef.mainNode.addClass("no-carousel");if(heroDef.type=="banner"){heroDef.mainNode.get("parentNode").addClass("banner-hero-wrap");}return;}if(heroDef.mainNode==null){Y.log("There is not a main node with that id");return;}if(heroDef.type=="banner"){heroDef.width=966;}else{if(heroDef.type=="product"&&heroDef.width>960){heroDef.width=960;}else{if(heroDef.type=="product"&&heroDef.width<=750){heroDef.controlWidth=heroDef.controlWidth*2;heroDef.width=heroDef.width-heroDef.controlWidth-5;}}}if(heroDef.customClass!=""){heroDef.mainNode.addClass(heroDef.customClass);}var carousel=new Y.Carousel({useMenuForNav:true,autoPlayInterval:5000,boundingBox:hId,numVisible:heroDef.visible,contentBox:heroList,width:heroDef.width,height:heroDef.height,isCircular:true});carousel.plug(Y.CarouselAnimPluginCircle,{animation:{speed:0.7}});heroDef.wrapClass=heroDef.type+"-hero-wrap";var heroWrap=heroDef.mainNode.wrap("<div class='"+heroDef.wrapClass+"'></div>");var carouselParent=heroWrap.get("parentNode");heroDef.getIndex=function(index,numItems,carousel){if(index==numItems-1){carousel.addItem(carousel.getItem(0));}else{if(index==0){Y.log("at beginning "+numItems);var addItem=carousel.getItem(numItems-1).cloneNode("deep");Y.log("item to add "+addItem);carousel.addItem(addItem,0);}}};if(heroDef.type=="banner"||heroDef.type=="landing"){Y.all(hId+" .scrollItems li").setStyle("width",heroDef.width);}else{if(heroDef.type=="landing"){Y.all(hId+" .scrollItems li").setStyle("width",heroDef.width);carouselParent.setStyle("width",heroDef.width);}}carouselParent.setStyle("height",heroDef.height);if(!carouselParent.one("#js-left-hero-arrow")){carouselParent.prepend("<div class='left-arrow' id='js-left-hero-arrow'>&#10094;</div>");}if(!carouselParent.one("#js-right-hero-arrow")){carouselParent.append("<div class='right-arrow' id='js-right-hero-arrow'>&#10095;</div>");}heroDef.leftArrow=carouselParent.one(".left-arrow");heroDef.rightArrow=carouselParent.one(".right-arrow");if(heroDef.type=="banner"){if(heroDef.width<1102){heroDef.leftArrow.setStyle("left","3%");heroDef.rightArrow.setStyle("right","3%");}if(heroDef.width<1050){heroDef.leftArrow.setStyle("left","2%");heroDef.rightArrow.setStyle("right","2%");}if(heroDef.width<968){heroDef.leftArrow.setStyle("left","0");heroDef.rightArrow.setStyle("right","3px");}}if(heroDef.type=="landing"){heroDef.leftArrow.setStyle("left","-20px");heroDef.rightArrow.setStyle("right","-20px");}heroDef.leftArrow.on("click",function(e){e.preventDefault();carousel.scrollPageBackward();});heroDef.rightArrow.on("click",function(e){e.preventDefault();carousel.scrollPageForward();});if(heroDef.type=="banner"||heroDef.type=="landing"){heroDef.mainNode.on("mouseover",function(e){carousel.stopAutoPlay();});heroDef.mainNode.on("mouseout",function(e){carousel.startAutoPlay();});heroDef.leftArrow.on("mouseover",function(e){carousel.stopAutoPlay();});heroDef.leftArrow.on("mouseout",function(e){carousel.startAutoPlay();});heroDef.rightArrow.on("mouseover",function(e){carousel.stopAutoPlay();});heroDef.rightArrow.on("mouseout",function(e){carousel.startAutoPlay();});}carousel.render();heroDef.contentHeight=Y.one(heroList).get("offsetHeight");if(heroDef.contentHeight<heroDef.height){Y.one(heroList).setStyle("height",heroDef.height);}if(heroDef.type=="banner"||heroDef.type=="landing"){carousel.startAutoPlay();}});}else{Y.log("no version of YUI");return;}};YUI.namespace("com.schoolspecialty.ebs.istore").createSticky=function(stickyId,options){if(typeof YUI!="undefined"){YUI().use("node","event",function(Y){var sticky={pinnedTo:"top",pinnedClass:"pinnedTop",parentClass:"stickyWrap",stopSelector:null,stopSelectorType:"tag",stopClass:"sticky-pinned-bottom",bottomPadding:0,height:null,width:null,heightType:"minHeight"};if(options){Y.mix(sticky,options,[overwrite=true]);}sticky.pinTop=function(windowY,stickyY,theNode,stopY){var tmpBottom;if(windowY!=null&&stickyY!=null){if(windowY>stickyY){if(theNode.hasClass(sticky.pinnedClass)==false){theNode.addClass(sticky.pinnedClass);}if(stopY!=null){stopY=sticky.getStop();if(sticky.stop(stopY,windowY)==true){theNode.setY(stopY);}else{theNode.removeAttribute("style");}}}if(stickyY>windowY){if(theNode.hasClass(sticky.pinnedClass)){theNode.removeClass(sticky.pinnedClass);theNode.removeClass(sticky.stopClass);theNode.setStyle("top","");}}}};sticky.node=Y.one("#"+stickyId);if(sticky.node==null){if(console){console.warn("No dom element with "+stickyId+" ID");return;}}sticky.getSelectType=function(selector,selectorType){switch(selectorType){case"tag":selector=selector;break;case"class":selector="."+selector;break;case"id":selector="#"+selector;}return selector;};sticky.getStop=function(){var tmpY;if(sticky.stopNode==null){sticky.stopSelector=sticky.getSelectType(sticky.stopSelector,sticky.stopSelectorType);sticky.stopNode=Y.one(sticky.stopSelector);}if(sticky.stopNode!=null&&sticky.parentNode!=null){tmpY=sticky.stopNode.getY();if(sticky.node.hasClass(sticky.pinnedClass)===false){tmpY=tmpY-sticky.parentNode.get("offsetHeight");}else{tmpY=tmpY-sticky.node.get("offsetHeight");}return tmpY;}else{return null;}};sticky.stop=function(stopY,windowY){stopY=stopY-sticky.bottomPadding;if(stopY<=windowY){return true;}else{return false;}};sticky.parent="<div class='"+sticky.parentClass+"'>";sticky.node.wrap(sticky.parent);sticky.parentNode=sticky.node.get("parentNode");sticky.y=sticky.parentNode.getY();if(sticky.height!=null){sticky.h=sticky.height;}else{sticky.h=sticky.parentNode.get("offsetHeight");}if(sticky.width!=null){stick.w=sticky.width;}else{sticky.w=sticky.parentNode.get("offsetWidth");}if(typeof sticky.h=="number"||sticky.h.indexOf("px")==-1){sticky.h=sticky.h+"px";}if(typeof sticky.w=="number"||sticky.w.indexOf("px")==-1){sticky.w=sticky.w+"px";}sticky.parentNode.setStyle("width",sticky.w);sticky.parentNode.setStyle(sticky.heightType,sticky.h);sticky.init=function(){if(sticky.stopSelector!=null){sticky.stopY=sticky.getStop();}if(sticky.pinnedTo=="top"){sticky.windowH=Y.DOM.docScrollY();sticky.pinTop(sticky.windowH,sticky.y,sticky.node,sticky.stopY);}Y.on("scroll",function(e){if(sticky.pinnedTo=="top"){sticky.windowH=Y.DOM.docScrollY();sticky.pinTop(sticky.windowH,sticky.y,sticky.node,sticky.stopY);}});};sticky.init();});}else{if(console){console.warn("YUI is not loaded. Create Sticky requires YUI");}}};YUI.namespace("com.schoolspecialty.ebs.istore").quickLinks=function(links,options){if(typeof YUI!="undefined"){YUI().use("node","event","transition","json-parse",function(Y){var ql={toggleId:"js-ql-toggle",linkId:"js-ql-links",toggleCName:"mini",delay:2500,duration:1,toggleTitle:"Quick Links",appendTo:"body",parentId:"js-quick-links",eventType:"load",toggleWidth:200,containerWidth:996};if(options){Y.mix(ql,options,[overwrite=true]);}ql.links=links;ql.createParent=function(){ql.qlHtml="<div id='"+ql.parentId+"' class='qlWrapper qlHidden'></div>";ql.appendNode.append(ql.qlHtml);};if(Y.one("#"+ql.parentId)){ql.qlNode=Y.one("#"+ql.parentId);}else{if(ql.appendTo=="body"){ql.appendNode=Y.one(ql.appendTo);}else{ql.appendNode=Y.one("#"+ql.appendTo);}if(ql.appendNode){ql.createParent();ql.qlNode=Y.one("#"+ql.parentId);}else{Y.log("Parent does not exist");return;}}if(typeof ql.qlNode=="undefined"){if(console){console.warn("A node with id "+stickyId+" does not exist in this document");}return;}ql.createToggle=function(){ql.toggleHtml="<div class='qlToggle' id='js-ql-toggle'>"+ql.toggleTitle+"<span class='arrow-up'> ▴ </span> <span class='arrow-down'> ▾ </span></div>";ql.qlNode.append(ql.toggleHtml);};ql.createLinks=function(){if(ql.links){Y.Array.each(ql.links,function(link,index){if(ql.linkTags){ql.linkTags+="<a href='"+link.href+"' target='"+link.target+"'>"+link.text+"</a>";}else{ql.linkTags="<a href='"+link.href+"' target='"+link.target+"'>"+link.text+"</a>";}});ql.linksHtml="<div class='qlLinks' id='js-ql-links'>"+ql.linkTags+"</div>";}else{ql.linksHtml="<div class='qlLinks' id='js-ql-links'><a href='#'>Sample Link</a></div>";}ql.qlNode.prepend(ql.linksHtml);};ql.toggleN=Y.one("#"+ql.toggleId);ql.linkNode=Y.one("#"+ql.linkId);if(ql.toggleN==null){ql.createToggle();ql.toggleN=Y.one("#"+ql.toggleId);}if(ql.linkNode==null){ql.createLinks();ql.linkNode=Y.one("#"+ql.linkId);}ql.windowWidth=ql.qlNode.get("winWidth");ql.linkCalc=function(){if(ql.windowWidth>960){ql.linkNode.setStyles({"width":"100%","padding-right":"0px"});ql.linkWidth=ql.windowWidth-ql.containerWidth;ql.linkOffset=ql.linkWidth/2;ql.linkNode.setStyle("paddingLeft",ql.linkOffset);ql.toggleD=ql.containerWidth-ql.toggleWidth;ql.linkOffset=ql.linkOffset+ql.toggleD;ql.toggleN.setStyle("left",ql.linkOffset+"px");}else{ql.scrollX=Y.DOM.docScrollX();ql.linkOffset=5;ql.linkWidth=ql.containerWidth;ql.linkNode.setStyles({"width":ql.linkWidth+"px","paddingLeft":"0px","left":-ql.scrollX+"px"});ql.linkWidth=ql.containerWidth-ql.scrollX;ql.linkOffset=ql.linkWidth-ql.toggleWidth;ql.toggleN.setStyle("left",ql.linkOffset+"px");}};ql.show=function(){ql.qlNode.removeClass(ql.toggleCName);ql.linkNode.transition({opacity:"1",duration:ql.duration});};ql.hide=function(){ql.linkNode.transition({opacity:"0",duration:ql.duration},function(){ql.qlNode.addClass(ql.toggleCName);});};ql.toggle=function(){if(ql.qlNode.hasClass(ql.toggleCName)){ql.show();}else{ql.hide();}};ql.toggleN.on("click",function(e){if(ql.qlNode.hasClass("clicked")==false){ql.qlNode.addClass("clicked");}ql.toggle();});ql.render=function(){Y.on("windowresize",function(e){ql.windowWidth=e.currentTarget.get("winWidth");ql.linkCalc();});Y.on("scroll",function(e){if(Y.DOM.docScrollX()>0){ql.linkCalc();}});ql.qlNode.removeClass("qlHidden");ql.qlNode.transition({opacity:"1",duration:ql.duration});Y.later(ql.delay,ql.qlNode,function(){if(ql.qlNode.hasClass("clicked")==false){}},[],false);};ql.linkCalc();if(typeof ql.attachTo=="undefined"){ql.render();}else{if(ql.eventType=="load"){ql.eventType="click";}Y.one("#"+ql.attachTo).on(ql.eventType,function(e){ql.render();});}});}else{Y.log("YUI is not loaded.");}};YUI().add("cart-module",function(Y){YUI.namespace("com.schoolspecialty.ebs.istore").cartModule={justAdded:function(item,options){var ja={panelId:"js-just-added",panelWidth:230,panelHeight:176,panelClass:"just-added",descriptionLength:42};if(options){Y.mix(ja,options,[overwrite=true]);}ja.panelNode=Y.one("#"+ja.panelId);ja.checkForNull=function(jaObject){Y.Object.each(jaObject,function(item,index){if(index.indexOf("Node")>-1){if(item==null){Y.log(index+" is null. Aborting Function");return true;}else{return false;}}});};ja.isNull=ja.checkForNull(ja);if(ja.isNull==true){return;}ja.getWindow=function(){ja.body=Y.one("body");return{height:ja.body.get("winHeight"),width:ja.body.get("winWidth")};};ja.startAnimation=function(node){ja.moveTo="-"+ja.panelHeight+"px";node.transition({right:0,duration:1},function(){Y.later(1000,node,function(){node.transition({top:ja.moveTo,duration:1},function(){node.addClass("panel-hidden");node.removeAttribute("style");});});});};ja.loadPanelContent=function(item,pNode){ja.item=item;var jaContent={};if(ja.item.itemQuantity!=null||ja.item.itemImage!=null||ja.item.itemName!=null||ja.item.itemPrice!=null){jaContent.quantity=ja.item.itemQuantity;jaContent.image=ja.item.itemImage;jaContent.description=ja.item.itemName;jaContent.price=ja.item.itemPrice;}else{Y.log("Incomplete data");return false;}jaContent.imageNode='<img src="'+jaContent.image+'" class="justAddedImage" />';if(jaContent.price.indexOf("$")==-1){jaContent.price="$"+jaContent.price;}if(jaContent.description.length>ja.descriptionLength){ja.descriptionLength=ja.descriptionLength-3;jaContent.description=jaContent.description.substring(0,ja.descriptionLength);jaContent.description=jaContent.description+"...";}if(pNode!=null){pNode.one("#js-ja-quantity").setHTML(jaContent.quantity);pNode.one(".thumbnail_box").setHTML(jaContent.imageNode);pNode.one("#js-ja-price").setHTML(jaContent.price);pNode.one("#js-ja-description").setHTML(jaContent.description);}return true;};ja.createPanel=function(){ja.winDim=ja.getWindow();ja.panelX=0-ja.panelWidth;ja.panelY=ja.winDim.height-ja.panelHeight;ja.panelY=ja.panelY/2;ja.panelNode.removeClass("panel-hidden");ja.panelNode.addClass(ja.panelClass);ja.panelNode.setStyles({top:ja.panelY,right:ja.panelX});ja.startAnimation(ja.panelNode);};if(ja.panelNode==null){Y.log("There is either no panel node on this page with an id of "+ja.panelId);return;}ja.loadSuccess=ja.loadPanelContent(item,ja.panelNode);if(ja.loadSuccess==true){ja.createPanel();}},justAddedAll:function(item,options){var ja={panelId:"js-just-added-all",panelWidth:230,panelHeight:176,panelClass:"just-added",descriptionLength:42};if(options){Y.mix(ja,options,[overwrite=true]);}ja.panelNode=Y.one("#"+ja.panelId);ja.checkForNull=function(jaObject){Y.Object.each(jaObject,function(item,index){if(index.indexOf("Node")>-1){if(item==null){Y.log(index+" is null. Aborting Function");return true;}else{return false;}}});};ja.isNull=ja.checkForNull(ja);if(ja.isNull==true){return;}ja.getWindow=function(){ja.body=Y.one("body");return{height:ja.body.get("winHeight"),width:ja.body.get("winWidth")};};ja.startAnimation=function(node){ja.moveTo="-"+ja.panelHeight+"px";node.transition({right:0,duration:1},function(){Y.later(1000,node,function(){node.transition({top:ja.moveTo,duration:1},function(){node.addClass("panel-hidden");node.removeAttribute("style");});});});};ja.loadPanelContent=function(item,pNode){ja.item=item;var jaContent={};if(ja.item.description!=null||ja.item.itemPrice!=null){jaContent.description=ja.item.description;jaContent.price=ja.item.itemPrice;}else{Y.log("Incomplete data");return false;}if(jaContent.description.length>ja.descriptionLength){ja.descriptionLength=ja.descriptionLength-3;jaContent.description=jaContent.description.substring(0,ja.descriptionLength);jaContent.description=jaContent.description+"...";}if(pNode!=null){pNode.one("#js-ja-price-all").setHTML(jaContent.price);pNode.one("#js-ja-description-all").setHTML(jaContent.description);}return true;};ja.createPanel=function(){ja.winDim=ja.getWindow();ja.panelX=0-ja.panelWidth;ja.panelY=ja.winDim.height-ja.panelHeight;ja.panelY=ja.panelY/2;ja.panelNode.removeClass("panel-hidden");ja.panelNode.addClass(ja.panelClass);ja.panelNode.setStyles({top:ja.panelY,right:ja.panelX});ja.startAnimation(ja.panelNode);};if(ja.panelNode==null){Y.log("There is either no panel node on this page with an id of "+ja.panelId);return;}ja.loadSuccess=ja.loadPanelContent(item,ja.panelNode);if(ja.loadSuccess==true){ja.createPanel();}},addCartAttach:function(eventObject,options){var evt={parentId:"js-product-overlay-panel",eventClass:"add-cart",returnType:"node",buttonClass:"add_cart",buttonType:"a",itemDescClass:".title",itemImgClass:".product-image",itemImgTag:"img",itemPriceClass:".amount",itemNumberClass:".item_number",itemIdClass:".item_id",targetParentClass:"overlay_product_image",quantityId:"js-quantity",zeroAlert:"You must specify a quantity that is 1 or more"};if(options){Y.mix(evt,options,[overwrite=true]);}evt.loadPanelContent=function(pNode){var evtContent={};evtContent.quantity=pNode.one("#"+evt.quantityId).get("value");evtContent.id=pNode.getAttribute("id");evtContent.image=pNode.one(evt.itemImgTag+evt.itemImgClass).getAttribute("src");evtContent.description=pNode.one(evt.itemDescClass).getHTML().replace(/"/g,'\\"');evtContent.price=pNode.one(evt.itemPriceClass).get("text");evtContent.href=pNode.one(evt.itemDescClass).getAttribute("href");if(evtContent.price.indexOf("$")>-1){evtContent.price=evtContent.price.replace("$","");}evtContent.price=Y.Number.parse(evtContent.price);evtContent.quantity=Y.Number.parse(evtContent.quantity);evtContent.itemNumber=pNode.one(evt.itemNumberClass).getHTML();evtContent.itemId=pNode.one(evt.itemIdClass).getHTML();if(evtContent.price==null||evtContent.quantity==null){Y.log("Could not parse price for this item");}else{evtContent.price=evtContent.quantity*evtContent.price;}return'{"itemImage": "'+evtContent.image+'", "itemId":"'+evtContent.itemId+'", "itemPrice": "'+evtContent.price+'", "itemQuantity": "'+evtContent.quantity+'", "itemNumber": "'+evtContent.itemNumber+'", "itemName": "'+evtContent.description.substring(0,78)+"..."+'"}';};evt.parentNode=Y.one("#"+evt.parentId);if(evt.parentNode==null){Y.log("There is either no panel node or no parent node on this page");return;}evt.attach=function(e){var tmpID=e.currentTarget.ancestor("."+evt.targetParentClass).get("id");var tmpNode=Y.one("#"+tmpID);if(evt.returnType=="id"){evt.returnData=tmpID;}else{evt.returnData=evt.loadPanelContent(tmpNode);}return evt.returnData;};return evt.attach(eventObject);},refreshCart:function(items,options){var cart={containerId:"js-cart-cont",quantityId:"js-cart-quantity",subtotalId:"js-cart-sub",itemsId:"js-item-list",refreshType:"refresh"};if(options){Y.mix(cart,options,[overwrite=true]);}cart.containerNode=Y.one("#"+cart.containerId);cart.quantityNode=Y.one("#"+cart.quantityId);cart.subtotalNode=Y.one("#"+cart.subtotalId);cart.itemsNode=Y.one("#"+cart.itemsId);cart.checkForNull=function(cartObject){Y.Object.each(cartObject,function(item,index){if(index.indexOf("Node")>-1){if(item==null){Y.log(index+" is null. Aborting Function");return true;}else{return false;}}});};cart.isNull=cart.checkForNull(cart);if(cart.isNull==true){return;}try{cart.items=Y.JSON.parse(items);}catch(e){Y.log("Invalid JSON data. Aborting refresh");return;}if(cart.refreshType=="append"){cart.itemCount=cart.quantityNode.get("text");cart.itemCount=Y.Number.parse(cart.itemCount);if(cart.items.itemQuantity){cart.addCount=Y.Number.parse(cart.items.itemQuantity);cart.itemCount=cart.itemCount+cart.addCount;cart.quantityNode.set("text",cart.itemCount);}else{Y.log("Couldn't update quantity because it was not available");}cart.subtotal=cart.subtotalNode.get("text");if(cart.subtotal!=null&&cart.items.itemPrice!=null){if(cart.subtotal.indexOf("$")>-1){cart.subtotal=cart.subtotal.replace("$","");}cart.subtotal=Y.Number.parse(cart.subtotal);cart.addPrice=Y.Number.parse(cart.items.itemPrice);cart.subtotal=cart.addPrice+cart.subtotal;cart.subtotal=Y.Number.format(cart.subtotal,{decimalPlaces:2});cart.subtotalNode.set("text","$"+cart.subtotal);}else{Y.log("Couldn't update price because the price was not found");}if(cart.items.itemNumber!=null||cart.items.itemQuantity!=null||cart.items.itemHref!=null||cart.items.itemName!=null){var tmpItem='<li class="gh_cart_menu"><div class="gh_cart_menu_subtext">Item #'+cart.items.itemNumber+"– Qty. "+cart.items.itemQuantity+'</div><a class="gh_cart_menu_item" href="'+cart.items.itemHref+'">'+cart.items.itemName+"</a></li>";cart.itemsNode.append(tmpItem);}else{Y.log("Could not add item to cart. There was a problem with the item data");}}else{if(cart.items.subtotal==null||cart.items.items==null){Y.log("There was a problem with the shopping cart data");}else{cart.quantityNode.set("text",cart.items.itemcount);cart.subtotalNode.set("text",cart.items.subtotal);cart.itemsNode.setHTML("");Y.Array.each(cart.items.items,function(item,index){if(item.itemNumber!=null&&item.itemQuantity!=null&&item.itemHref!=null&&item.itemName!=null){var tmpItem='<li class="gh_cart_menu"><div class="gh_cart_menu_subtext">Item #'+item.itemNumber+"– Qty. "+item.itemQuantity+'</div><a class="gh_cart_menu_item" href="'+item.itemHref+'">'+item.itemName+"</a></li>";cart.itemsNode.append(tmpItem);}else{Y.log("There was a problem adding "+index+" to the cart");}});}}},quickLook:function(productContainerId,options){var cart=this;var hv={eventType:"click",loadingText:"Calculating Price...",showButtons:false,panelId:"js-product-overlay-panel",panelHeight:445,panelWidth:880,productContainerClass:"box",eventClass:"product-image",imgSrcClass:"product",imgPanelClass:"product-image",imageUrl:"data-hover",descriptionClass:"product",closeButtonClass:"product-close",dataTag:"large",quantityId:"js-quantity",seePriceClass:"see_price",cartClass:"add_cart",errorClass:"errorMessage",linkClass:"quick-look",itemClass:"item_number",itemClass2:"contract_item_number",itemLabelClass:"item_number_label",productLinkClass:"name",productImageLinkId:"js-product-image-link-anchor",insertAfterClass:"product-image",panelIndex:1001,createPanel:false};if(options){Y.mix(hv,options,[overwrite=true]);}hv.checkForNull=function(hvObject){Y.Object.each(hvObject,function(item,index){if(index.indexOf("Node")>-1){if(item==null){Y.log(index+" is null. Aborting Function");return true;}else{return false;}}});};hv.bodyNode=Y.one("body");hv.productContainerNode=Y.one("#"+productContainerId);hv.panelNode=Y.one("#"+hv.panelId);hv.productImageLinkAnchor=Y.one("#"+hv.productImageLinkId);hv.isNull=hv.checkForNull(hv);if(hv.isNull==true||hv.bodyNode.one(".error_page")){return;}hv.panelDescriptionNode=hv.panelNode.one("div."+hv.descriptionClass);hv.productNode=hv.productContainerNode.one("."+hv.productContainerClass);hv.productNodeWidth=hv.productNode.get("offsetWidth");hv.productNodeHeight=hv.productNode.get("offsetHeight");hv.productNodeWidth=hv.productNodeWidth/2;hv.productNodeHeight=hv.productNodeHeight/2;hv.errorNode=hv.panelNode.one("."+hv.errorClass);hv.imagePanelNode=hv.panelNode.one("."+hv.imgPanelClass);hv.seePriceNode=hv.panelNode.one("."+hv.seePriceClass);hv.addCartNode=hv.panelNode.one("."+hv.cartClass);hv.clearEvent=function(node){var tmpHtml,tmpWrap="<div class='tmpWrap'>",tmpParent;node.wrap(tmpWrap);tmpParent=node.get("parentNode");tmpHtml=tmpParent.getHTML();tmpParent.empty();node=tmpParent.appendChild(tmpHtml);node.unwrap();return node;};if(hv.panelNode.get("parentNode").hasClass("yui3-panel")==true){hv.addCartNode=hv.clearEvent(hv.addCartNode);hv.panelRender=true;hv.panelNode.unwrap();}else{if(hv.createPanel==true){hv.panelRender=true;}else{hv.panelRender=true;}}hv.isNull=hv.checkForNull(hv);if(hv.isNull==true){return;}hv.isNull=hv.checkForNull(hv);if(hv.isNull==true){return;}hv.loadData=function(e){var itemNumber;var itemNumberLabel;hv.detachEvents();hv.activeNode=e.target.ancestor("."+hv.productContainerClass);hv.activeId=hv.activeNode.getAttribute("id");hv.activeImageUrl=hv.activeNode.one("img."+hv.imgSrcClass).getAttribute("data-"+hv.dataTag);if(hv.activeImageUrl==""){hv.activeImageUrl=hv.activeNode.one("img."+hv.imgSrcClass).getAttribute("src");}hv.descriptionNode=hv.activeNode.one("div."+hv.descriptionClass).getHTML();hv.panelDescriptionNode.setHTML(hv.descriptionNode);itemNumber=hv.panelDescriptionNode.one("."+hv.itemClass);itemNumberLabel=hv.panelDescriptionNode.one("."+hv.itemLabelClass);hv.panelDescriptionNode.one("."+hv.productLinkClass).append(itemNumberLabel);hv.panelDescriptionNode.one("."+hv.productLinkClass).append(itemNumber);hv.panelDescriptionNode.one("."+hv.productLinkClass).append(hv.panelDescriptionNode.one("."+hv.itemClass2));hv.imagePanelNode.setAttribute("src",hv.activeImageUrl);if(hv.panelDescriptionNode.one("."+hv.seePriceClass)==null){hv.panelDescriptionNode.one(".calc").replace('<a href="#" class="see_price" ><img class="calc" title="See Your Price" src="images/template/ssiCalculatorRed.png" alt="" /><span class="price_text">See Your Price</span></a>');}var prodLink=hv.panelDescriptionNode.one("a.title");if(prodLink!=null&&hv.productImageLinkAnchor!=null){hv.productImageLinkAnchor.setAttribute("href",prodLink.getAttribute("href"));}if(hv.panelNode.one(".overlay_product").one(".quick_view_ship_notice")!=null){hv.panelNode.one(".overlay_product").one(".quick_view_ship_notice").remove();}var shippingMsgProduct=hv.activeNode.one(".hidden_shipping_notice");if(shippingMsgProduct!=null){var shippingMsgQV='<div class="quick_view_ship_notice">'+'<div class="shipping_notice">'+'<p><span class="dotted_underline">'+shippingMsgProduct.getHTML()+"</span>"+"</p>"+"</div>"+"</div>";}hv.panelNode.one(".overlay_product").append(shippingMsgQV);hv.addEvents();};hv.panelShow=function(hoverNode){hv.loadData(hoverNode);hv.panelNode.one("#"+hv.quantityId).set("value","1");hv.errorNode.addClass("hidden");if(hv.panelNode.one(".return_price")!=null){hv.panelNode.one(".return_price").removeClass("show");}hv.panelNode.one("."+hv.seePriceClass).removeClass("hide");if(hv.panel!=null){hv.panel.align();hv.panel.show();}else{hv.initPanel();hv.panel.show();}};hv.panelHide=function(){if(hv.panelNode.one("."+hv.imgPanelClass)){hv.panelNode.one("."+hv.imgPanelClass).set("src","");}hv.panel.hide();};hv.addMask=function(context){context.prepend("<div class='window-mask'></div>");return"window-mask";};hv.removeMask=function(maskClass){hv.maskNode=Y.one("."+maskClass);if(hv.maskNode!=null){hv.maskNode.remove();}};hv.updatePrice=function(price){hv.activeNode.one(".amount").setHTML(price);hv.panelNode.one(".amount").setHTML(price);if(hv.activeNode.one(".see_price")){hv.activeNode.one(".see_price").addClass("hidden");}};hv.seePriceReturn=function(e,response){if(hv.activeNode.one(".see_price")!=null&&hv.activeNode.one(".amount")!=null){hv.activeNode.one(".amount").insert('<img class="grey_calc" title="Your Price" alt="Your Price" src="images/template/ssiCalculatorGrey.png"/>',"after");}e.currentTarget.addClass("hide");var thumbnailPrice=hv.panelNode.one(".thumbnail_price");if(thumbnailPrice){thumbnailPrice.addClass("hidden");thumbnailPrice.removeClass("thumbnail_price");}var thumbnailHtml=hv.activeNode.one(".thumbnail_price");if(thumbnailHtml){thumbnailHtml.removeClass("thumbnail_price");thumbnailHtml.setHTML(response.priceHtml);}else{if(hv.activeNode.one(".amount")!=null){hv.activeNode.one(".amount").ancestor("p").append(response.priceHtml);}}if(hv.panelNode.one(".return_price")==null){e.currentTarget.ancestor("p").append(response.priceHtml);}else{hv.panelNode.one(".return_price").addClass("show");}hv.addEvents();};hv.loadPrice=function(e){e.preventDefault();e.currentTarget.set("text",hv.loadingText);hv.maskClass=hv.addMask(hv.bodyNode);var quantity=hv.panelNode.one("#js-quantity").get("value");var itemNumber=hv.panelNode.one(".item_number").getHTML();var itemId=hv.panelNode.one(".item_id").getHTML();var seeYourPriceForm=document.createElement("form");document.body.appendChild(seeYourPriceForm);seeYourPriceForm.id=Y.guid();var addHidden=function(name,value){var h=document.createElement("input");h.setAttribute("type","hidden");h.setAttribute("name",name);h.setAttribute("value",value);seeYourPriceForm.appendChild(h);};addHidden("itemId",itemId);addHidden("qty",quantity);addHidden("itemNumber",itemNumber);addHidden("processingAction","seeYourPrice");var NUMBER_PATTERN=new RegExp("^\\d+$");if(quantity==""||!quantity.match(NUMBER_PATTERN)||quantity<1){hv.addError("Invalid Quantity");return;}YUI.com.schoolspecialty.ebs.istore.recordEvent("calcClick","Calculator","Click",itemNumber);Y.io("/OA_HTML/xxssi_ibeCCtdMenu.jsp",{method:"POST",form:seeYourPriceForm,on:{success:function(id,o){var response=Y.JSON.parse(o.responseText);if(response.errorMessage==undefined){e.currentTarget.ancestor().append('<img class="grey_calc" title="Your Price" alt="Your Price" src="images/template/ssiCalculatorGrey.png"/>');hv.seePriceReturn(e,response);hv.updatePrice(response.price);}else{if(!e.currentTarget.ancestor().one(".calc")){e.currentTarget.replace('<a href="#" class="see_price" ><img class="calc" title="See Your Price" src="images/template/ssiCalculatorRed.png" alt="" /><span class="price_text">See Your Price</span></a>');hv.detachEvents();hv.addEvents();}else{e.currentTarget.set("text","See Your Price");}hv.addError(response.errorMessage);}hv.removeMask(hv.maskClass);},failure:function(id,result){hv.addError("Error getting item price, please try again later or contact Customer Care");hv.removeMask(hv.maskClass);}}});};hv.addError=function(message){hv.errorNode.setHTML(message);hv.errorNode.removeClass("hidden");};hv.addToCart=function(e){e.preventDefault();var tmpCallback=cart.addCartAttach(e,{returnType:"json",targetParentClass:"overlay_product_image"});if(tmpCallback){YUI.com.schoolspecialty.ebs.istore.cartActions.addToCart(Y.JSON.parse(tmpCallback),{quickView:hv});}else{hv.addError("There was a problem adding this item to your cart");}};hv.addEvents=function(){hv.panelNode.one("."+hv.seePriceClass).on("click",hv.loadPrice);};hv.detachEvents=function(){hv.panelNode.one("."+hv.seePriceClass).detach();};hv.initPanel=function(){hv.panel=new Y.Panel({srcNode:hv.panelNode,width:hv.panelWidth,height:hv.panelHeight,modal:true,render:hv.panelRender,centered:true,constrain:true,visible:false,zIndex:hv.panelIndex});YUI.com.schoolspecialty.ebs.istore.alwaysCenter(hv.panel);hv.panelNode.one(".yui3-button-close").on("click",hv.panelHide);hv.panel.get("boundingBox").addClass("."+hv.panelClass);hv.panelNode.removeClass("qlHidden");hv.addCartNode.on("click",hv.addToCart);};hv.init=function(){if(Y.UA.ie==8){hv.bodyNode.prepend(hv.panelNode);}hv.initPanel();hv.productContainerNode.all("."+hv.insertAfterClass).insert("<a href='#' class='"+hv.linkClass+"'></a>","after");hv.productContainerNode.delegate(hv.eventType,function(e){e.preventDefault();hv.panelShow(e);},"."+hv.linkClass);hv.productContainerNode.all("."+hv.seePriceClass).on("click",function(e){e.preventDefault();hv.panelShow(e);hv.panelNode.one("."+hv.seePriceClass).simulate("click");});};}};},"1.0.0",{requires:["io","node","event","transition","json-parse","datatype","node-event-simulate","event-hover","panel"]});YUI.namespace("com.schoolspecialty.ebs.istore").megaMenu=function(navItem,menu,options){if(typeof YUI!="undefined"){YUI().use("node","event","event-hover","transition","json-parse",function(Y){var mm={categoryId:"js-mm-left",itemId:"js-mm-item-container",categoryContainerClass:"gh_mega_menu_left_categories gh_mega_menu_left_categories_green",categoryContainerTag:"ul",categoryItemClass:"gh_mega_menu_left_categories",categoryItemTag:"li",itemsId:"js-item-list",shopById:"js-shop-by-container",featuredId:"js-feature-container",featureItemClass:"gh_mega_menu_featured_categories",itemsContainerTag:"ul",shopByClass:"gh_mega_menu_shop_by",itemsItemTag:"li",itemsWrapperTag:"div",itemsWrapperClass:"grid_200 prefix_top_5 suffix_90",itemsContainerClass:"menu_2",itemsWrapper:true,mainContainerClass:"gh_mega_menu_shell",showOnEvent:"hover"};if(options){Y.mix(mm,options,[overwrite=true]);}mm.navParentNode=Y.one("#"+navItem),mm.categoriesNode=Y.one("#"+mm.categoryId),mm.itemsNode=Y.one("#"+mm.itemId),mm.featuredNode=Y.one("#"+mm.featuredId),mm.shopByNode=Y.one("#"+mm.shopById);mm.checkForNull=function(mmObject){Y.Object.each(mmObject,function(item,index){if(index.indexOf("Node")>-1){if(item==null){Y.log(index+" is null. Aborting Function");return true;}else{return false;}}});};mm.isNull=mm.checkForNull(mm);if(mm.isNull==true){return;}mm.buildMenu=function(json){if(typeof json=="undefined"){return false;}if(mm.categoriesNode.getHTML()!=""){mm.categoriesNode.setHTML("");}if(mm.itemsNode.getHTML()!=""){mm.itemsNode.setHTML("");}mm.layer1=function(menuItems){for(var i=0;i<menuItems.length;i++){if(menuItems[i].submenu){mm.productCategory(menuItems[i].submenu.itemdata);}else{}}};mm.productCategory=function(categories){mm.currentUrl=window.location.href;mm.currentPath=window.location.pathname;if(categories.length!="undefined"){mm.categoriesNode.append("<"+mm.categoryContainerTag+" class='"+mm.categoryContainerClass+"'></"+mm.categoryContainerTag+">");mm.categoryAppend="";for(var e=0;e<categories.length;e++){if(e==0){mm.catSelectedClass="selected";}else{mm.catSelectedClass="";}if(categories[e].submenu){mm.categoryAppend+="<"+mm.categoryItemTag+" class='"+mm.categoryItemClass+" "+mm.catSelectedClass+"' id='category-"+e+"'><a href='"+categories[e].submenu.catURL+"'>"+categories[e].text+"</a><span class='arrow'>›</span></"+mm.categoryItemTag+">";mm.categoryItems(categories[e].submenu.itemdata,e);if(categories[e].submenu.featured){mm.categoryOther(categories[e].submenu.featured,mm.featuredNode,e,mm.featureItemClass);}if(categories[e].submenu.shopBy){mm.categoryOther(categories[e].submenu.shopBy,mm.shopByNode,e,mm.shopByClass);}}else{Y.log(categories[e].text+"does not have a submenu");}}mm.categoriesNode.one(mm.categoryContainerTag).append(mm.categoryAppend);}else{Y.log(categories.text+"is not an array from product category function");}};mm.categoryItems=function(catItems,catId){var left,colCount=0,colNum=[],itemAppend="",colDiv=[],cnt=0;if(catId==0){mm.itemsNode.append("<div class='wrapper' id='cat-item-"+catId+"'></div>");}else{mm.itemsNode.append("<div class='wrapper hidden' id='cat-item-"+catId+"'></div>");}mm.itemWrapNode=mm.itemsNode.one("#cat-item-"+catId);colNum=catItems.length;left=colNum%3;colNum=colNum/3;colNum=Math.floor(colNum);if(left==1){colDiv[0]=colNum+1;colDiv[1]=colNum;colDiv[2]=colNum;}else{if(left==2){colDiv[0]=colNum+1;colDiv[1]=colNum+1;colDiv[2]=colNum;}else{colDiv[0]=colNum;colDiv[1]=colNum;colDiv[2]=colNum;}}if(catItems.length!="undefined"){for(var j=0;j<catItems.length;j++){if(mm.currentUrl==catItems[j].url||mm.currentPath==catItems[j].url){mm.selectedItemClass="itemSelected";}else{mm.selectedItemClass="";}itemAppend+="<li class='"+mm.selectedItemClass+"' ><a href='"+catItems[j].url+"'>"+catItems[j].text+"</a></li>";colCount++;if(colCount==colDiv[cnt]){mm.itemWrapNode.append("<"+mm.itemsWrapperTag+" class='"+mm.itemsWrapperClass+"'> <"+mm.itemsContainerTag+" class='"+mm.itemsContainerClass+"'> "+itemAppend+"</"+mm.itemsContianerTag+"></"+mm.itemsContainerWrapper+">");colCount=0;if(cnt==3){cnt=0;}else{cnt++;}itemAppend="";}}}else{Y.log(catItems.text+" is not an array. From Category items");}};mm.categoryOther=function(fContent,otherNode,catId,itemClass){var tmpNode;tmpNode=Y.Node.create(fContent);if(tmpNode.hasClass(itemClass)==false){tmpNode.addClass(itemClass);}tmpNode.addClass("cat-item-"+catId);otherNode.append(tmpNode);if(otherNode.one(".selected")==null){mm.defaultOtherNode=otherNode.one("."+itemClass);mm.defaultOtherNode.addClass("default");mm.defaultOtherNode.addClass("selected");}};mm.layer1(json);return true;};mm.convertItemId=function(item){if(item.target.get("tagName")=="LI"){var tmpId=item.target.get("id");}else{if(item.target.get("tagName")=="A"){var tmpId=item.target.ancestor("li").get("id");}}if(tmpId.indexOf("category-")>-1){tmpId=tmpId.replace("category-","cat-item-");}else{Y.log("Coudln't get category id");}return tmpId;};mm.linkHover=function(e){var tmpFeat,tmpShop;mm.selectedId=e.target.get("id");mm.categoriesNode.all("li").removeClass("selected");mm.categoriesNode.one("#"+mm.selectedId).addClass("selected");mm.hoverId=mm.convertItemId(e);mm.itemsNode.all(".wrapper").addClass("hidden");mm.itemsNode.one("#"+mm.hoverId).setStyle("opacity",0).removeClass("hidden").transition({duration:0.2,opacity:1,easing:"ease-in"});tmpFeat=mm.featuredNode.one("."+mm.hoverId);tmpShop=mm.shopByNode.one("."+mm.hoverId);if(tmpFeat!=null){mm.featuredNode.all("."+mm.featureItemClass).removeClass("selected");tmpFeat.setStyle("opacity",0).addClass("selected").transition({duration:0.2,opacity:1,easing:"ease-in"});}else{if(mm.featuredNode.one(".default").hasClass("selected")==false){mm.featuredNode.all("."+mm.featureItemClass).removeClass("selected");mm.featuredNode.one(".default").setStyle("opacity",0).addClass("selected").transition({duration:0.2,opacity:1,easing:"ease-in"});}}if(tmpShop!=null){mm.shopByNode.all("."+mm.shopByClass).removeClass("selected");tmpShop.setStyle("opacity",0).addClass("selected").transition({duration:0.2,opacity:1,easing:"ease-in"});}else{if(mm.shopByNode.one(".default").hasClass("selected")==false){mm.shopByNode.all("."+mm.shopByClass).removeClass("selected");mm.shopByNode.one(".default").setStyle("opacity",0).addClass("selected").transition({duration:0.2,opacity:1,easing:"ease-in"});}}};mm.attachEvents=function(listNode){mm.categoriesNode.delegate(mm.showOnEvent,mm.linkHover,mm.categoryItemTag);mm.mainContainerNode=mm.navParentNode.one("."+mm.mainContainerClass);mm.mainContainerHeight=mm.mainContainerNode.get("offsetHeight")-12;mm.mainContainerNode.setStyles({"height":0});mm.navParentNode.on(mm.showOnEvent,mm.showMain,mm.hideMain);return true;};mm.showMain=function(e){mm.mainContainerNode.setStyle("visibility","visible").transition({duration:0.25,easing:"ease-in",height:mm.mainContainerHeight+"px",delay:0.2});};mm.hideMain=function(e){mm.mainContainerNode.transition({duration:0.25,easing:"ease-in",height:"0px"},function(){this.setStyle("visibility","hidden");});};mm.setSelected=function(item){var tmpParentId=item.ancestor("div.wrapper").get("id");mm.itemsNode.all(".wrapper").addClass("hidden");mm.itemsNode.one("#"+tmpParentId).removeClass("hidden");if(tmpParentId.indexOf("cat-item-")>-1){tmpParentId=tmpParentId.replace("cat-item-","category-");mm.categoriesNode.all("li").removeClass("selected");mm.categoriesNode.one("#"+tmpParentId).addClass("selected");}};mm.selectedMenu=function(){mm.selectedLink=mm.itemsNode.one(".itemSelected");if(mm.selectedLink==null){mm.selectedLink=mm.itemsNode.one(".wrapper a");}mm.setSelected(mm.selectedLink);return;};mm.buildSuccess=mm.buildMenu(menu);if(mm.buildSuccess==true){mm.selectedMenu();mm.attachSuccess=mm.attachEvents(mm.categoriesNode.one("ul"));if(mm.attachSuccess==false){Y.log("There was a problem attaching events");}}else{Y.log("there was a problem building the menu from JSON");}});}else{Y.log("YUI is not loaded.");}};YUI.namespace("com.schoolspecialty.ebs.istore").loginPanel={panel:"not initialized",init:function(options){var parentObj=this;YUI().use("node","event","panel",function(Y){var lg={containerId:"js-login-dialog",eventType:"click",showButtons:false,cancelButtonId:"js-login-cancel",panelHeight:375,panelWidth:824};if(options){Y.mix(lg,options,[overwrite=true]);}lg.bodyNode=Y.one("body");lg.containerNode=Y.one("#"+lg.containerId);lg.cancelNode=Y.one("#"+lg.cancelButtonId);lg.checkForNull=function(lgObject){Y.Object.each(lgObject,function(item,index){if(index.indexOf("Node")>-1){if(item==null){Y.log(index+" is null. Aborting Function");return true;}else{return false;}}});};lg.isNull=lg.checkForNull(lg);if(lg.isNull==true){return;}lg.movePanel=function(node){lg.bodyNode.prepend(node);};lg.removePanel=function(node){lg.bodyNode.append(node);};lg.panel=new Y.Panel({srcNode:"#"+lg.containerId,width:lg.panelWidth,height:lg.panelHeight,modal:true,render:true,centered:true,constrain:true,visible:false,zIndex:9999});YUI.com.schoolspecialty.ebs.istore.alwaysCenter(lg.panel);lg.getWindow=function(){lg.bodyNode=Y.one("body");return{height:lg.bodyNode.get("winHeight"),width:lg.bodyNode.get("winWidth")};};if(Y.UA.ie==8){Y.log("ie 8. moving panel");if(lg.containerNode){lg.movePanel(lg.containerNode.ancestor("div"));lg.maskNode=lg.bodyNode.one(".yui3-widget-mask");if(lg.maskNode!=null){lg.movePanel(lg.maskNode);}}}lg.addEvent=function(){lg.attachNode.on(lg.eventType,function(e){if(lg.panel){lg.panel.show();}else{Y.log("Login panel has not been initialized");}});};lg.addCancelEvent=function(){if(lg.panel){if(lg.cancelNode!=null){lg.cancelNode.on("click",function(e){lg.panel.hide();});}}};lg.addCancelEvent();parentObj.panel=lg.panel;});},showLogin:function(params){if(this.panel=="not initialized"){}else{document.getElementById("js-login-dialog").style.display="";document.getElementById("com.schoolspecialty.ebs.iStore.login.username").value="";document.getElementById("com.schoolspecialty.ebs.iStore.login.password").value="";document.getElementById("com.schoolspecialty.ebs.iStore.login.errormessages").innerHTML="";var guestChkOut;if(params!=null){guestChkOut=params.guestChkOut;}var guestVarDisplay;if(guestChkOut!=null&&guestChkOut=="T"){guestVarDisplay="";}else{guestVarDisplay="none";}if(document.getElementById("com.schoolspecialty.ebs.iStore.login.guestCheckOut_prompt")){document.getElementById("com.schoolspecialty.ebs.iStore.login.guestCheckOut_prompt").style.display=guestVarDisplay;}if(document.getElementById("com.schoolspecialty.ebs.iStore.login.guestCheckOut_radio")){document.getElementById("com.schoolspecialty.ebs.iStore.login.guestCheckOut_radio").style.display=guestVarDisplay;}YUI.com.schoolspecialty.ebs.istore.loginPanel.clearRadioButton(document.notRegForm.newCustomer[0]);YUI.com.schoolspecialty.ebs.istore.loginPanel.clearRadioButton(document.notRegForm.newCustomer[1]);YUI.com.schoolspecialty.ebs.istore.loginPanel.clearRadioButton(document.notRegForm.newCustomer[2]);this.panel.show();this.panel.on("visibleChange",function(){var maskNode=document.getElementById("waitPanelMask");if(maskNode!=null){maskNode.className="";}});document.getElementById("com.schoolspecialty.ebs.iStore.login.username").focus();}},hideLogin:function(){if(this.panel=="not initialized"){}else{this.panel.hide();}},clearRadioButton:function(radioElement){if(radioElement&&radioElement.type=="radio"&&radioElement.className.indexOf("styled")>-1&&radioElement.checked==true){radioElement.previousSibling.style.backgroundPosition="0 0";radioElement.checked=false;}}};YUI.namespace("com.schoolspecialty.ebs.istore").searchFilter=function(options){if(typeof YUI!="undefined"){YUI().use("node","event","event-hover","transition",function(Y){var sr={containerId:"js-search-select",selectTypeEvent:"click",menuShowEvent:"hover",selectedItemId:"js-search-filter",listId:"js-search-list",selectedClass:"selectEd",itemTag:"a"};if(options){Y.mix(sr,options,[overwrite=true]);}sr.containerNode=Y.one("#"+sr.containerId);sr.selectedNode=Y.one("#"+sr.selectedItemId);sr.listNode=Y.one("#"+sr.listId);sr.checkForNull=function(srObject){Y.Object.each(srObject,function(item,index){if(index.indexOf("Node")>-1){if(item==null){Y.log(index+" is null. Aborting Function");return true;}else{return false;}}});};sr.isNull=sr.checkForNull(sr);if(sr.isNull==true){return;}sr.changeSelection=function(e){sr.filterValue=e.currentTarget.get("text");sr.selectedNode.set("text",sr.filterValue);var parentId=e.currentTarget.ancestor().get("id");if("js-relevancy-list"==parentId){YUI.com.schoolspecialty.ebs.istore.search.changeRelevancy();}else{if("js-show-list"==parentId){YUI.com.schoolspecialty.ebs.istore.search.changePageSize();}}sr.hideSearch(e);};sr.showSearch=function(e){sr.containerNode.addClass(sr.selectedClass);sr.listNode.setStyle("visibility","visible").transition({easing:"ease-in",duration:0.3,height:sr.listHeight});};sr.hideSearch=function(e){sr.listNode.transition({easing:"ease-in",duration:0.3,height:0},function(){sr.containerNode.removeClass(sr.selectedClass);this.setStyle("visibility","hidden");});};sr.toggle=function(e){if(sr.containerNode.hasClass(sr.selectedClass)){sr.hideSearch(e);}else{sr.showSearch(e);}};sr.initEvents=function(){sr.listHeight=sr.listNode.getStyle("height");sr.listNode.setStyles({"height":"0px"});if(sr.menuShowEvent=="click"){sr.containerNode.on(sr.menuShowEvent,sr.toggle);}else{if(sr.menuShowEvent=="hover"){sr.containerNode.on(sr.menuShowEvent,sr.showSearch,sr.hideSearch);}}sr.listNode.delegate(sr.selectTypeEvent,sr.changeSelection,sr.itemTag);};sr.initEvents();});}else{Y.log("YUI is not loaded.");}};YUI.namespace("com.schoolspecialty.ebs.istore").placeholder=function(options){YUI().use("node","event",function(Y){pl={inputId:"searchText",inputText:"",usePlaceholder:true,testWithModernizr:true,testWithUA:false,browserType:"ie",debug:false,browserVersion:8};if(options){Y.mix(pl,options,[overwrite=true]);}pl.checkForNull=function(plObject){Y.Object.each(plObject,function(item,index){if(index.indexOf("Node")>-1){if(item==null){Y.log(index+" is null. Aborting Function");return true;}else{return false;}}});};pl.isNull=pl.checkForNull(pl);if(pl.isNull==true){return;}pl.debugM=function(message){if(pl.debug==true){Y.log(message);}};pl.inputNode=Y.one("#"+pl.inputId);if(pl.inputNode!=null){if(pl.inputText==""&&pl.inputNode.hasAttribute("placeholder")==true){pl.inputText=pl.inputNode.getAttribute("placeholder");}else{if(pl.inputText==""&&pl.inputNode.hasAttribute("placeholder")==false){pl.debugM("Please add a placeholder attribute or pass in the input text you would like used");}}}else{Y.log("returning");pl.debugM("Input node is null");return;}pl.wrapInput=function(pInput){var tmpWrap,fSize,fColor,h,t,w;pInput.set("value","");pInput.set("placeholder","");fSize=pInput.getStyle("fontSize");fColor=pInput.getStyle("color");tmpWrap=pInput.wrap("<div class='placeholder-wrap'>").get("parentNode");h=tmpWrap.get("offsetHeight");tmpWrap.append("<span class='background-text' style='font-size:"+fSize+"; color:"+fColor+";'>"+pl.inputText+"</span>");pl.backgroundText=tmpWrap.one(".background-text");t=pl.backgroundText.get("offsetHeight");h-=t;h=h/2;pl.backgroundText.setStyle("padding",h+"px 10px");pl.backgroundText.on("click",function(e){pl.inputNode.focus();});};pl.placeholderSynth=function(){Y.log(pl.inputText);pl.wrapInput(pl.inputNode);pl.inputNode.on("focus",function(e){var tmp=this,tmpP=tmp.get("parentNode"),tmpB=tmpP.one(".background-text");if(tmp.get("value")==""){tmp.on("keyup",function(a){if(tmp.get("value")!=""){tmpB.hide();}else{tmpB.show();}});}});pl.inputNode.on("blur",function(e){if(this.get("value")==""){pl.backgroundText.show();}});};pl.focusSynth=function(){var tmpVal;Y.log("focus synth");if(pl.inputNode!=null){pl.inputNode.removeAttribute("placeholder");pl.inputNode.set("value",pl.inputText);pl.inputNode.on("focus",function(e){tmpVal=pl.inputNode.get("value");if(Y.Lang.trim(tmpVal)==pl.inputText){pl.inputNode.set("value","");}});pl.inputNode.on("blur",function(e){tmpVal=pl.inputNode.get("value");if(Y.Lang.trim(tmpVal)==""){pl.inputNode.set("value",pl.inputText);}});pl.formNode=pl.inputNode.ancestor("form");pl.formNode.on("submit",function(e){if(pl.inputNode.get("value")==pl.inputText){pl.inputNode.set("value","");}});}};pl.initPlaceholder=function(){if(pl.inputNode!=null){if(pl.usePlaceholder==true){pl.placeholderSynth();}else{pl.focusSynth();}}};if(pl.testWithModernizr==true&&typeof modernizr!=undefined){if(Modernizr.input.placeholder==false){pl.initPlaceholder();}else{pl.debugM("Placeholders are supported");}}else{if(pl.testWithUA==true){if(Y.UA[pl.browserType]==pl.browserVersion){pl.initPlaceholder();}}}});};YUI.namespace("com.schoolspecialty.ebs.istore").doNavigateProductDetail=function(itemId,mste,sectionId,ref){var params="?minisite="+mste+"&item="+itemId;YUI.com.schoolspecialty.form.submit("/OA_HTML/ibeCCtpItmDspRte.jsp"+params,{ref:ref},"POST");};YUI.namespace("com.schoolspecialty.ebs.istore.items").defaultQty=function(){var pub={};pub.remove=function(itemQty,dftQty){var defaultQty="1";if(dftQty!=null){defaultQty=dftQty;}if(itemQty!=null){if(itemQty.value==defaultQty){itemQty.value="";}}};pub.add=function(itemQty,dftQty){var defaultQty="1";if(dftQty!=null){defaultQty=dftQty;}if(itemQty!=null){if(itemQty.value==""){itemQty.value=defaultQty;itemQty.removeAttribute("defaultremoved");}}};return pub;}();YUI.namespace("com.schoolspecialty.ebs.istore").recordEvent=function(event,eventCategory,eventAction,eventData){if(typeof _gaq!=="undefined"){ga("send","event",eventCategory,eventAction,eventData);dataLayer.push({"event":event,"eventCategory":eventCategory,"eventAction":eventAction,"eventLabel":eventData});}};namespace("com.schoolspecialty.ebs.istore").prodCollection=function(){var pub={};var numToDisplay=7;var hideItems=function(tabName){var tabPrefix="#js-"+tabName;var tab=tabPrefix+"-tab";var tabText=tab+"-text";var tabItems=tabPrefix+"-items";$(tab).removeClass("items-shown");$(tab).addClass("items-hidden");$(tabText).html("See Items");$(tabItems).addClass("hidden");};var seeItems=function(tabName){var tabPrefix="#js-"+tabName;var tab=tabPrefix+"-tab";var tabText=tab+"-text";var tabItems=tabPrefix+"-items";$(tab).removeClass("items-hidden");$(tab).addClass("items-shown");$(tabText).html("Hide Items");$(tabItems).removeClass("hidden");};pub.seeHide=function(tabName){if($("#js-"+tabName+"-items").hasClass("hidden")){seeItems(tabName);}else{hideItems(tabName);}};pub.showMore=function(numToShow){for(var x=numToDisplay;x<numToShow;x++){$("#js-prod-collection-"+x).removeClass("hidden");}$("#js-prod-collection-show-more").addClass("hidden");$("#js-prod-collection-show-less").removeClass("hidden");};pub.showLess=function(numToHide){for(var x=numToDisplay;x<numToHide;x++){$("#js-prod-collection-"+x).addClass("hidden");}$("#js-prod-collection-show-more").removeClass("hidden");$("#js-prod-collection-show-less").addClass("hidden");$("html, body").animate({scrollTop:$(".product-collection-section").offset().top},500);};pub.showImageOverlay=function(id){$("#"+id).css({display:"block"});$("#"+id+", #"+id+" a, #"+id+"img, .product-collection-grid .column-image > div > div a").animate({height:"136px",width:"136px"},250);};pub.hideImageOverlay=function(id){$("#"+id).css({display:"none"});};return pub;}();namespace("com.schoolspecialty.ebs.istore").util=function(){var pub={};pub.isNotBlank=function(str){if(typeof str!=="undefined"&&str&&str.length>0){return true;}else{return false;}};return pub;}();